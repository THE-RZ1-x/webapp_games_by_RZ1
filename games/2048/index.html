<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2048 - RZ1 ARCADE</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: linear-gradient(135deg, #1e0030 0%, #180051 50%, #000428 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            font-family: 'Press Start 2P', cursive;
            color: #fff;
        }
        .game-container {
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            border: 2px solid #00fff2;
            box-shadow: 0 0 20px rgba(0, 255, 242, 0.3);
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 5px;
        }
        .cell {
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            border-radius: 5px;
            transition: all 0.2s ease;
        }
        .score {
            margin: 20px 0;
            font-size: 24px;
            text-shadow: 0 0 10px #00fff2;
        }
        .controls {
            margin-top: 20px;
            text-align: center;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }
        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            display: none;
        }
        .restart-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background: #00fff2;
            border: none;
            border-radius: 5px;
            color: #000;
            font-family: 'Press Start 2P', cursive;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .restart-btn:hover {
            background: #ff00ff;
            color: #fff;
        }
    </style>
</head>
<body>
    <div class="score">Score: <span id="score">0</span></div>
    <div class="game-container">
        <div class="grid" id="grid"></div>
    </div>
    <div class="controls">
        Use Arrow Keys to Move<br>
        P : Pause
    </div>
    <div class="game-over" id="gameOver">
        <h2>Game Over!</h2>
        <p>Final Score: <span id="finalScore">0</span></p>
        <button class="restart-btn" onclick="restartGame()">Play Again</button>
    </div>
    <script>
        const grid = document.getElementById('grid');
        const scoreElement = document.getElementById('score');
        const gameOverElement = document.getElementById('gameOver');
        const finalScoreElement = document.getElementById('finalScore');

        let board = [];
        let score = 0;
        let paused = false;

        const cellColors = {
            2: '#eee4da',
            4: '#ede0c8',
            8: '#f2b179',
            16: '#f59563',
            32: '#f67c5f',
            64: '#f65e3b',
            128: '#edcf72',
            256: '#edcc61',
            512: '#edc850',
            1024: '#edc53f',
            2048: '#edc22e'
        };

        function initializeBoard() {
            board = Array(4).fill().map(() => Array(4).fill(0));
            score = 0;
            scoreElement.textContent = '0';
            addNewTile();
            addNewTile();
            updateDisplay();
        }

        function addNewTile() {
            const emptyCells = [];
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    if (board[i][j] === 0) {
                        emptyCells.push({x: i, y: j});
                    }
                }
            }
            if (emptyCells.length > 0) {
                const {x, y} = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                board[x][y] = Math.random() < 0.9 ? 2 : 4;
            }
        }

        function updateDisplay() {
            grid.innerHTML = '';
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    const value = board[i][j];
                    if (value !== 0) {
                        cell.textContent = value;
                        cell.style.backgroundColor = cellColors[value] || '#edc22e';
                        cell.style.color = value <= 4 ? '#776e65' : '#f9f6f2';
                    }
                    grid.appendChild(cell);
                }
            }
        }

        function move(direction) {
            if (paused) return;

            let moved = false;
            const newBoard = JSON.parse(JSON.stringify(board));

            function merge(arr) {
                const merged = arr.filter(x => x !== 0);
                for (let i = 0; i < merged.length - 1; i++) {
                    if (merged[i] === merged[i + 1]) {
                        merged[i] *= 2;
                        score += merged[i];
                        merged.splice(i + 1, 1);
                    }
                }
                while (merged.length < 4) merged.push(0);
                return merged;
            }

            // Move and merge tiles
            if (direction === 'ArrowLeft' || direction === 'ArrowRight') {
                for (let i = 0; i < 4; i++) {
                    let row = board[i].filter(x => x !== 0);
                    if (direction === 'ArrowLeft') {
                        row = merge(row);
                    } else {
                        row = merge(row.reverse()).reverse();
                    }
                    if (JSON.stringify(board[i]) !== JSON.stringify(row)) {
                        moved = true;
                    }
                    board[i] = row;
                }
            } else {
                for (let j = 0; j < 4; j++) {
                    let col = board.map(row => row[j]).filter(x => x !== 0);
                    if (direction === 'ArrowUp') {
                        col = merge(col);
                    } else {
                        col = merge(col.reverse()).reverse();
                    }
                    if (JSON.stringify(board.map(row => row[j])) !== JSON.stringify(col)) {
                        moved = true;
                    }
                    for (let i = 0; i < 4; i++) {
                        board[i][j] = col[i] || 0;
                    }
                }
            }

            if (moved) {
                addNewTile();
                scoreElement.textContent = score;
                updateDisplay();
                checkGameOver();
            }
        }

        function checkGameOver() {
            // Check for 2048 tile
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    if (board[i][j] === 2048) {
                        showGameOver(true);
                        return;
                    }
                }
            }

            // Check for available moves
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    if (board[i][j] === 0) return;
                    if (i < 3 && board[i][j] === board[i + 1][j]) return;
                    if (j < 3 && board[i][j] === board[i][j + 1]) return;
                }
            }
            showGameOver(false);
        }

        function showGameOver(won) {
            gameOverElement.style.display = 'block';
            finalScoreElement.textContent = score;
            gameOverElement.querySelector('h2').textContent = won ? 'You Win!' : 'Game Over!';
        }

        function restartGame() {
            gameOverElement.style.display = 'none';
            initializeBoard();
        }

        document.addEventListener('keydown', (e) => {
            if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
                e.preventDefault();
                move(e.key);
            }
            if (e.key === 'p' || e.key === 'P') {
                paused = !paused;
            }
        });

        // Initialize game
        initializeBoard();
    </script>
</body>
</html>
